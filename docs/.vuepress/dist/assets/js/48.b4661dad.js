(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{491:function(t,s,a){"use strict";a.r(s);var n=a(8),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"ros学习心得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ros学习心得"}},[t._v("#")]),t._v(" ROS学习心得")]),t._v(" "),s("ul",[s("li",[t._v("ROS：框架＋工具＋功能＋社区"),s("br"),t._v("\nROS架构分为三个层次：OS层、中间层、应用层。"),s("br"),t._v("\n从系统实现的角度看，ROS也可分为三个层次：文件系统、计算图、开源社区。"),s("br"),t._v("\nROS中的节点是一些执行运算任务的进程。"),s("br"),t._v("\npackage：功能包，是ROS中的基本组织形式，编译（catkin）的基本单元，亦即编译的对象。"),s("br"),t._v("\nCMakeLists.txt：规定编译的规则。")])]),t._v(" "),s("p",[t._v("1、利用"),s("code",[t._v("catkin_make")]),t._v("编译工作空间"),s("br"),t._v("\n（1）建立工作空间，一定要有src文件（编写源码的地方）")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" ~/catkin_ws/src   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# catkin_ws是工作空间，名称可以自己修改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/catkin_ws/\ncatkin_make\n")])])]),s("p",[t._v("（2）编译（必须回到工作空间进行编译）")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/catkin_ws/\ncatkin_make\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ~/catkin_ws/devel/setup.bash\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 刷新环境")]),t._v("\n")])])]),s("br"),t._v(" "),s("p",[t._v("2、一个 package 可以包含多个可执行文件（节点），但其至少要有 CMakeLists.txt 和 package.xml 这两个文件。"),s("br"),t._v("\n（1）CMakeLists.txt：")]),t._v(" "),s("div",{staticClass:"language-cmake extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cmake"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("cmake_minimum_required")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定catkin最低版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定软件包的名称")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("find_package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定编译时需要的依赖项")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_message_files")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加消息文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_service_files")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加服务文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_action_files")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加动作文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate_messages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成消息、服务、动作")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catkin_package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定catkin信息给编译系统生成Cmake文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add_library")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定生成库文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add_executable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定生成可执行文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("target_link_libraries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定可执行文件需要链接哪些库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catkin_add_gtest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加测试单元")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("install")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成可安装目标")]),t._v("\n")])])]),s("p",[t._v("（2）package.xml：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--根标签--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--包名--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--版本号--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--包描述--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("maintainer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--维护者--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("license")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--软件许可--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("buildtool_depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--编译工具--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("build_depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--编译时的依赖--\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("run_depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--运行时的依赖--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--根标签--\x3e")]),t._v("\n")])])]),s("p",[t._v("（3）代码文件：脚本（shell、python）、C++（头文件、源文件）")]),t._v(" "),s("p",[t._v("（4）自定义通信格式：message消息(*.msg)、service服务（*.srv）、action动作（*.action）"),s("br"),t._v("\n在自定义服务类型时，在 CmakeList.txt 中要添加如下配置：")]),t._v(" "),s("div",{staticClass:"language-cmake extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cmake"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("find_package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("catkin REQUIRED COMPONENTS\n  geometry_msgs\n  roscpp\n  rospy\n  std_msgs\n  message_generation\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_service_files")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   FILES\n   AddTwoInts.srv\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate_messages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   DEPENDENCIES\n   std_msgs\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("在编译功能包时，要在 CmakeList.txt 中要添加如下配置：")]),t._v(" "),s("div",{staticClass:"language-cmake extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cmake"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include_directories")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("include "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),t._v("catkin_INCLUDE_DIRS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add_executable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server src/server.cpp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add_dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),t._v("AddTwoInts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("_EXPORTED_TARGETS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),t._v("catkin_EXPORTED_TARGETS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("target_link_libraries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),t._v("catkin_LIBRARIES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("（5）launch文件以及配置文件："),s("br"),t._v("\nlaunch文件：一次性运行多个可执行文件。"),s("br"),t._v("\n配置文件：yaml")]),t._v(" "),s("p",[t._v("（6）一个典型package文件的构成：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("CMakeLists.txt  \npackage.xml  \nscripts：*.py、*.sh  \ninclude：*.h  \nsrc：*.cpp  \nmsg：*.msg  \nsrv：*.srv  \nlaunch：*.launch  \n")])])]),s("br"),t._v(" "),s("p",[t._v("3、常用包管理命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查找某个pkg的地址")]),t._v("\nrospack "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" package_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出本地所有pkg")]),t._v("\nrospack list\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 跳转到某个pkg的路径下")]),t._v("\nroscd package_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列举某个pkg下的文件信息")]),t._v("\nrosls package_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译pkg中的文件")]),t._v("\nrosed package_name file_name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个pkg")]),t._v("\ncatkin_create_pkg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pkg_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("depends_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装某个pkg所需的依赖")]),t._v("\nrosdep "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pkg_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动ros master")]),t._v("\nroscore\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志输出")]),t._v("\nrosout\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参数服务器")]),t._v("\nparameter server\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动一个node")]),t._v("\nrosrun "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pkg_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出当前运行的node信息")]),t._v("\nrosnode list\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示某个node的详细信息")]),t._v("\nrosnode info "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 结束某个node")]),t._v("\nrosnode "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动master和多个node")]),t._v("\nroslaunch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pkg_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("file_name.launch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" \n")])])]),s("br"),t._v(" "),s("p",[t._v("4、ROS通信")]),t._v(" "),s("ul",[s("li",[t._v("ROS的核心：分布式网络，使用了基于TCP/IP的通信方式，实现了模块间点对点的松耦合连接，可以实现若干种类型的通信。")]),t._v(" "),s("li",[t._v("ROS是一个分布式框架，为用户提供多节点（进程）之间的通信服务，所有软件功能和工具都建立在这种分布式通信机制上。")]),t._v(" "),s("li",[t._v("ROS的通信机制：话题通信机制、服务通信机制、参数管理通信机制。")])]),t._v(" "),s("p",[t._v("（1）话题通信机制工作原理："),s("br"),t._v("\n发布者 Talker 通过 RPC 向 ROS Master 注册信息；"),s("br"),t._v("\n订阅者 Listener 通过 RPC 向 ROS Master 注册信息；"),s("br"),t._v("\nROS Master 进行信息匹配，若匹配成功则通过 RPC 向 Listener 发送 Talker 的 RPC 地址信息；"),s("br"),t._v("\nListener 通过 RPC 向 Talker 发送连接请求；"),s("br"),t._v("\nTalker 接收连接请求，通过 RPC 向 Listener 确认连接信息；"),s("br"),t._v("\nListener 尝试与 Talker 建立网络连接（TCP方式）"),s("br"),t._v("\nTalker 向 Listener 发布数据。")]),t._v(" "),s("p",[t._v("（2）服务通信机制原理："),s("br"),t._v("\nTalker 注册；"),s("br"),t._v("\nListener 注册；"),s("br"),t._v("\nROS Master 进行信息匹配，若匹配成功则向 Listener 发送 Talker 的 TCP 地址信息；"),s("br"),t._v("\nListener 使用 TCP 尝试与 Talker 建立网络连接，并且发送服务的请求数据；"),s("br"),t._v("\nTalker 接收服务请求和参数后，开始执行服务功能，执行完成后，向 Listener 发送应答数据。")]),t._v(" "),s("p",[t._v("（3）参数管理机制原理："),s("br"),t._v("\nTalker 设置变量，使用 RPC 向 ROS Master 发送参数设置数据，包含参数名和参数值;"),s("br"),t._v("\nROS Master 会将参数名和参数值保存到参数列表中；"),s("br"),t._v("\nListener 通过 RPC 向 ROS Master 发送参数查找请求，包含所要查找的参数名；"),s("br"),t._v("\nROS Master 根据 Listener 的查找请求从参数列表中进行查找，查找到参数后，使用 RPC 将参数值发送给 Listener。\n"),s("br")]),t._v(" "),s("p",[t._v("5、环境变量"),s("br"),t._v("\n设置环境变量是为了让系统知道功能包的位置在哪，以便能找到。"),s("br"),t._v("\n环境变量的设置脚本文件是"),s("code",[t._v("setup.bash")]),t._v("。"),s("br"),t._v("\n让环境变量在所有终端中有效，则需要在终端的配置文件中加入环境变量的设置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"source /WORKSPACE/devel/setup.bash"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.bashrc\n")])])]),s("p",[t._v("6、工作空间的覆盖："),s("br"),t._v("\n新设置的路径在"),s("code",[t._v("ROS_PACKAGE_PATH")]),t._v("中会自动放置在最前端。在运行时，ROS 会优先查找最前端的工作空间是否存在指定的功能包，如果不存在，就顺序向后查找其他工作空间，直到最后一个工作空间为止。")]),t._v(" "),s("p",[t._v("7、创建 Publisher 发布者："),s("br"),t._v("\n（1）头文件；"),s("br"),t._v("\n（2）初始化节点；"),s("br"),t._v("\n（3）创建节点句柄；"),s("br"),t._v("\n（4）在 Master 端注册一个 Publisher。")])])}),[],!1,null,null,null);s.default=e.exports}}]);